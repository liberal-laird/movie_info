{{ define "main"}}

{{ $paginator := .Paginate (where site.RegularPages "Section" "posts") }}

{{ if site.Params.zenMode }}
<div class="dream-zen-posts max-w-[65ch] mt-8 mx-auto px-4 space-y-8">
{{ range $paginator.Pages }}
  {{ .Render "zen-summary" }}
{{ end }}
</div>
{{ else }}
<div class="movie-grid">
  {{ range $paginator.Pages }}
    <div class="movie-grid-item">
      {{ .Render "summary" }}
    </div>
  {{ end }}
</div>
{{ end }}

{{ if gt $paginator.TotalPages 1 }}
<div class="flex justify-center mt-8">
  {{ partial "paginator.html" (dict "paginator" $paginator) }}
</div>
{{ end }}

{{ end }}

{{ define "css" }}
<style>
  /* 首页电影网格：自适应设备 */
  .movie-grid {
    display: grid;
    gap: 0.75rem;
    padding: 1rem;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
  }
  .movie-grid-item {
    min-width: 0;
    overflow: hidden;
  }
  .movie-grid-item .card { height: 100%; display: flex; flex-direction: column; }
  .movie-grid-item .card figure { flex-shrink: 0; overflow: hidden; }
  .movie-grid-item .card figure img { width: 100%; height: auto; object-fit: cover; display: block; }
  .movie-grid-item .card-body { flex: 1; min-width: 0; overflow: hidden; }
  .movie-grid-item .card-title { word-break: break-word; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }
  /* 小屏手机：2 列，略小字号 */
  @media (max-width: 479px) {
    .movie-grid { grid-template-columns: repeat(2, 1fr); gap: 0.5rem; padding: 0.5rem; }
    .movie-grid-item .card-title { font-size: 0.8125rem; }
    .movie-grid-item .card-body p { font-size: 0.75rem; }
  }
  @media (min-width: 480px) and (max-width: 639px) {
    .movie-grid { grid-template-columns: repeat(3, 1fr); }
  }
  @media (min-width: 640px) and (max-width: 1023px) {
    .movie-grid { grid-template-columns: repeat(4, 1fr); }
  }
  @media (min-width: 1024px) {
    .movie-grid { grid-template-columns: repeat(6, 1fr); gap: 1rem; }
  }
</style>
{{ end }}

{{ define "js" }}

{{ if site.Params.Experimental.jsDate }}
{{ partial "luxon.html" . }}
{{ end }}

{{ end }}
